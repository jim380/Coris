<app-chart-cards-gov *ngIf="proposals" [proposals]="proposals.slice(-3)"></app-chart-cards-gov>
<div class="responsive-row">
  <div class="mat-elevation-z8 scrollbar-near-moon table-responsive text-nowrap">
    <table mat-table multiTemplateDataRows [dataSource]="dataSource" class="mat-elevation-z8 w-auto">
      
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef><i class="ion-android-funnel"></i></th>
        <td mat-cell *matCellDef="let proposal">
          {{proposal.proposal_id}}
        </td>
      </ng-container>
    
      <ng-container matColumnDef="title" sticky>
        <th mat-header-cell *matHeaderCellDef class="th-lg">
          <div class="align-center">
            <i class="ion-code"></i>&nbsp;Title
          </div>
        </th>
        <td mat-cell *matCellDef="let proposal">
          <div class="align-center">
            <span class="badge badge-primary" style="cursor: pointer;" (click)="openGovDetailDialog(proposal)">
              {{proposal.proposal_content.value.title | slice:0:20}} ...
            </span>
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef class="th-lg"><i class="ion-android-checkbox-outline"></i>&nbsp;Status</th>
        <td mat-cell *matCellDef="let proposal">
          <span *ngIf="proposal.proposal_status === 'Passed'">
              <i class="ion-checkmark-circled success"></i>
          </span>
          <span *ngIf="proposal.proposal_status === 'Rejected'">
              <i class="ion-close-circled fail"></i>
          </span>
          <span *ngIf="proposal.proposal_status === 'Voting Period'">
              <i class="ion-minus-circled voting"></i>
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="submitted">
        <th mat-header-cell *matHeaderCellDef class="th-lg"><i class="ion-paper-airplane"></i>&nbsp;Submitted</th>
        <td mat-cell *matCellDef="let proposal">  
          {{proposal.submit_time | date:"h:mm a, MMM d, y"}}
        </td>
      </ng-container>
    
      <ng-container matColumnDef="deposit">
        <th mat-header-cell *matHeaderCellDef class="th-lg"><i class="ion-archive"></i>&nbsp;Deposit</th>
        <td mat-cell *matCellDef="let proposal">  
          {{proposal.total_deposit[0].amount/1e6 | number:".2-2"}} <span class="ticker">ATOM</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="depositEnd">
          <th mat-header-cell *matHeaderCellDef class="th-lg"><i class="ion-load-c"></i>&nbsp;Deposit End</th>
          <td mat-cell *matCellDef="let proposal">  
            {{proposal.deposit_end_time | date:"h:mm a, MMM d, y"}}
          </td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let proposal; columns: displayedColumns;"
          [appBgHighlight]="'#d1d1d1'" defaultColor="#ffffff">
      </tr>
    </table>
  </div>
</div>